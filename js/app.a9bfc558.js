(function(e){function t(t){for(var r,l,s=t[0],o=t[1],c=t[2],u=0,v=[];u<s.length;u++)l=s[u],Object.prototype.hasOwnProperty.call(a,l)&&a[l]&&v.push(a[l][0]),a[l]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r]);d&&d(t);while(v.length)v.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,s=1;s<n.length;s++){var o=n[s];0!==a[o]&&(r=!1)}r&&(i.splice(t--,1),e=l(l.s=n[0]))}return e}var r={},a={app:0},i=[];function l(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=r,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)l.d(n,r,function(t){return e[t]}.bind(null,r));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],o=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var d=o;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"04d4":function(e,t,n){"use strict";n("139f")},"139f":function(e,t,n){},"31bf":function(e){e.exports=JSON.parse('[{"id":243,"title":"Work","start":"2022-01-26T05:00:00Z","end":"2022-01-26T10:00:00Z"},{"id":244,"title":"Work","start":"2022-01-27T05:00:00Z","end":"2022-01-27T10:00:00Z"},{"id":245,"title":"Work","start":"2022-01-28T05:00:00Z","end":"2022-01-28T10:00:00Z"},{"id":247,"title":"Work","start":"2022-01-31T08:00:00Z","end":"2022-01-31T11:30:00Z"},{"id":248,"title":"Work","start":"2022-02-01T05:00:00Z","end":"2022-02-01T10:00:00Z"},{"id":250,"title":"Work","start":"2022-01-29T08:30:00Z","end":"2022-01-29T10:00:00Z"},{"id":253,"title":"Work","start":"2022-02-02T05:00:00Z","end":"2022-02-02T10:00:00Z"},{"id":254,"title":"Work","start":"2022-02-03T05:00:00Z","end":"2022-02-03T10:00:00Z"},{"id":255,"title":"Work","start":"2022-02-04T05:00:00Z","end":"2022-02-04T10:00:00Z"}]')},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("Calendar")],1)},i=[],l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrapper"},[e._m(0),n("div",{staticClass:"content"},[n("h5",{staticClass:"total-week-hour"},[e._v("Weekly hrs scheduled: "+e._s(e.weeklyHours))]),n("v-dialog",{attrs:{persistent:"",scrollable:"","max-width":"640px","hide-overlay":e.$vuetify.breakpoint.mdAndDown,fullscreen:e.$vuetify.breakpoint.mdAndDown},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}},[n("EditShift",{attrs:{title:"Edit Shift"},on:{change:e.updateEvent,deleteEvent:e.deleteEvent,close:e.closeDialog},model:{value:e.selectedCalendarEvent,callback:function(t){e.selectedCalendarEvent=t},expression:"selectedCalendarEvent"}})],1),n("FullCalendar",{ref:"calendar",attrs:{id:"calendar",options:e.calendarOptions},scopedSlots:e._u([{key:"eventContent",fn:function(t){return[n("div",{staticClass:"float-right ma-1"},[n("v-icon",{attrs:{dark:""},on:{click:function(n){return n.stopPropagation(),e.deleteEvent(t.event)}}},[e._v("mdi-close")])],1),n("div",{staticClass:"float-left ma-1"},[e._v(" "+e._s(t.timeText)),n("br"),e._v(" "+e._s(t.event.title)+" ")])]}}])})],1)])},s=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header"},[n("h3",{staticClass:"page-title"},[e._v("Work Schedules")])])}],o=(n("d3b7"),n("f5ff")),c=n("3e32"),d=n("a20c"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{attrs:{primary:""}},[n("v-card-title",[e._v(" "+e._s(e.title)+" ")]),n("v-card-text",[n("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-text-field",{attrs:{label:"Title","prepend-icon":"mdi-text"},model:{value:e.eventTitle,callback:function(t){e.eventTitle=t},expression:"eventTitle"}}),n("v-row",[n("v-col",[n("v-text-field",{attrs:{label:"Start date","prepend-icon":"mdi-calendar",type:"date",min:e.minDate,rules:e.startRules},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}})],1),n("v-col",[n("v-text-field",{attrs:{label:"Start time",type:"time",rules:e.startRules},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}})],1)],1),n("v-row",[n("v-col",[n("v-text-field",{attrs:{label:"End date","prepend-icon":"mdi-calendar",type:"date",min:e.startDate,rules:e.endRules},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}})],1),n("v-col",[n("v-text-field",{attrs:{label:"End time",type:"time",rules:e.endRules},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}})],1)],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary"},on:{click:function(t){return t.stopPropagation(),e.updateEvent.apply(null,arguments)}}},[e._v("Save")]),n("v-btn",{staticClass:"white--text",attrs:{color:"red"},on:{click:function(t){return t.stopPropagation(),e.deleteEvent.apply(null,arguments)}}},[e._v("Delete")]),n("v-btn",{attrs:{color:"secondary",text:""},on:{click:function(t){return t.stopPropagation(),e.close.apply(null,arguments)}}},[e._v("Cancel")])],1)],1)},v=[],f={model:{prop:"event",event:"change"},props:{event:Object,title:String},computed:{eventTitle:function(){return this.event?this.event.title:""},startStr:function(){return this.event?this.startDate+"T"+this.startTime:""},endStr:function(){return this.event?this.endDate+"T"+this.endTime:""},minDate:function(){return(new Date).toISOString().substr(0,10)},startRules:function(){var e=this,t=function(){return new Date(e.startStr).getTime()>(new Date).getTime()||"Start date/time must be after today/now."};return[t]},endRules:function(){var e=this,t=function(){return new Date(e.endStr).getTime()>new Date(e.startStr).getTime()||"End date/time must be after start date/time."};return[t]}},data:function(){return{valid:!1,startDate:"",startTime:"",endDate:"",endTime:""}},watch:{event:function(e){this.populateFields(e)},startStr:function(){this.validateForm()},endStr:function(){this.validateForm()}},mounted:function(){this.populateFields(this.event)},methods:{populateFields:function(e){e&&e.startStr&&(this.startDate=e.startStr.substr(0,10),this.startTime=e.startStr.substr(11,5)),e&&e.endStr&&(this.endDate=e.endStr.substr(0,10),this.endTime=e.endStr.substr(11,5))},validateForm:function(){this.$refs.form.validate()},updateEvent:function(){if(this.valid){var e={id:this.event.id,title:this.event.title,startStr:this.startStr,start:new Date(this.startStr),endSt:this.endStr,end:new Date(this.endStr)};this.$emit("change",e)}},deleteEvent:function(){this.$emit("deleteEvent",this.event)},close:function(){this.$emit("close")}}},h=f,p=n("2877"),m=n("6544"),w=n.n(m),g=n("8336"),b=n("b0af"),T=n("99d9"),E=n("62ad"),S=n("4bd4"),k=n("0fd9"),D=n("2fa4"),y=n("8654"),x=Object(p["a"])(h,u,v,!1,null,null,null),C=x.exports;w()(x,{VBtn:g["a"],VCard:b["a"],VCardActions:T["a"],VCardText:T["b"],VCardTitle:T["c"],VCol:E["a"],VForm:S["a"],VRow:k["a"],VSpacer:D["a"],VTextField:y["a"]});var O=n("1da1"),_=n("d4ec"),W=n("bee2"),j=(n("96cf"),n("d81d"),n("4de4"),n("7db0"),n("c740"),n("a434"),n("31bf")),Z=function(){function e(){Object(_["a"])(this,e),this.events=j,this.maxId=this.events.map((function(e){return e.id})).reduce((function(e,t){return t>e?t:e}),0)}return Object(W["a"])(e,[{key:"getEvents",value:function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(t){var n,r,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new Date(t.start),r=new Date(t.end),e.abrupt("return",new Promise((function(e){e(a.events.filter((function(e){return new Date(e.start)<=r&&new Date(e.end)>=n})))})));case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"saveEvent",value:function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.id=++this.maxId,this.events.push(t),e.abrupt("return",Promise.resolve(t));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateEvent",value:function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.events.find((function(e){return e.id===parseInt(t.id)})),n.start=t.start,n.end=t.end,e.abrupt("return",Promise.resolve(n));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteEvent",value:function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.events.findIndex((function(e){return e.id===parseInt(t)})),r=this.events.splice(n,1),e.abrupt("return",Promise.resolve(r));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),$=new Z;n("159b");function R(e,t){var n=new Date(e.currentData.dateProfile.activeRange.start);n=new Date(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate());var r,a,i,l,s,o=[0,0,0,0,0,0,0];return t&&t.length&&t.forEach((function(e){r=new Date(e.start),a=new Date(e.end),i=new Date(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()+1);while(a.getTime()>i.getTime())s=(i.getTime()-r.getTime())/36e5,l=Math.floor((r.getTime()-n.getTime())/24/60/60/1e3),o[l]+=s,r=new Date(i),i.setDate(i.getDate()+1);s=(a.getTime()-r.getTime())/36e5,l=Math.floor((r.getTime()-n.getTime())/24/60/60/1e3),l<o.length&&(o[l]+=s)})),o}function P(e){var t="Hrs: ",n=document.querySelector(".fc-scrollgrid-shrink"),r=n&&n.clientWidth||50,a=document.createElement("table");a.className="total-week-day-hour";var i=document.createElement("thead");a.append(i);var l=document.createElement("tr");i.append(l);var s=document.createElement("th");s.className="fc-timegrid-slot fc-timegrid-slot-label fc-scrollgrid-shrink",s.style.width=r+"px",l.append(s);var o=document.createElement("div");o.className="fc-timegrid-slot-label-frame fc-scrollgrid-shrink-frame",s.append(o);var c=document.createElement("div");c.className="fc-timegrid-slot-label-cushion fc-scrollgrid-shrink-cushion",o.append(c);var d=["mon","tue","wed","thu","fri","sat","sun"];return e.forEach((function(e,n){var r=document.createElement("th");r.className="fc-day-header fc-widget-header fc-"+d[n],r.append(t+e),l.append(r)})),a}var A={components:{FullCalendar:o["a"],EditShift:C},data:function(){return{showDialog:!1,allowWeekEdit:!0,weeklyHours:0,calendarOptions:{timeZone:"local",plugins:[c["a"],d["a"]],buttonText:{today:"This week",week:"Week"},headerToolbar:{left:"prev,next today",center:"title",right:"timeGridWeek"},eventTimeFormat:{hour:"numeric",minute:"2-digit",meridiem:"short"},initialView:"timeGridWeek",allDaySlot:!1,editable:!0,eventStartEditable:!0,eventResizableFromStart:!0,selectable:!0,selectMirror:!1,dayMaxEvents:!1,weekends:!0,nowIndicator:!0,firstDay:1,height:"auto",aspectRatio:4,eventAllow:this.allowShiftEditing,selectAllow:this.allowShiftEditing,eventOverlap:this.allowOverlap,selectOverlap:this.allowOverlap,events:this.loadEvents,select:this.handleDateSelect,eventClick:this.handleEventClick,eventsSet:this.handleEventsSet,eventChange:this.handleEventChange},calendarEvents:[],calendarApi:null,selectedCalendarEvent:null}},mounted:function(){this.calendarApi=this.$refs.calendar.getApi()},methods:{allowShiftEditing:function(e,t){return t||(t=e),this.allowWeekEdit?new Date(e.start).getTime()>(new Date).getTime()&&new Date(t.start).getTime()>(new Date).getTime()||this.$toastr.w("Shift modification before today/now is not allowed")&&!1:new Date(e.start).getISOWeek()>(new Date).getISOWeek()&&new Date(t.start).getISOWeek()>(new Date).getISOWeek()||this.$toastr.w("Shift modification for this week is not allowed")&&!1},allowOverlap:function(){return this.$toastr.w("Overlapping shifts are not allowed"),!1},loadEvents:function(e,t){$.getEvents({start:e.startStr,end:e.endStr}).then((function(e){t(e)}))},handleDateSelect:function(e){var t=this,n="Work";$.saveEvent({title:n,start:e.startStr,end:e.endStr}).then((function(){t.$toastr.s("Event created successfully"),e.view.calendar.refetchEvents()}))},handleEventClick:function(e){this.allowShiftEditing(e.event)&&(this.selectedCalendarEvent={id:e.event.id,title:e.event.title,startStr:e.event.startStr,endStr:e.event.endStr},this.showDialog=!0)},updateEvent:function(e){var t=this;$.updateEvent(e).then((function(){t.$toastr.s("Event updated successfully"),t.calendarApi.refetchEvents(),t.showDialog=!1,t.selectedCalendarEvent=null}))},deleteEvent:function(e){var t=this;this.confirmDelete(e.title)&&$.deleteEvent(e.id).then((function(){t.$toastr.s("Event deleted successfully"),t.calendarApi.refetchEvents(),t.showDialog=!1,t.selectedCalendarEvent=null}))},handleEventChange:function(e){var t=this;$.updateEvent(e.event).then((function(){t.$toastr.s("Event updated successfully")}))},handleEventsSet:function(e){if(this.calendarApi){var t=R(this.calendarApi,e),n=document.querySelector(".fc-timegrid-slots .total-week-day-hour");n&&n.remove(),n=P(t),document.querySelector(".fc-timegrid-slots").append(n),this.weeklyHours=t.reduce((function(e,t){return e+t}),0)}},closeDialog:function(){this.showDialog=!1,this.selectedCalendarEvent=null},confirmDelete:function(e){return confirm("Are you sure you want to delete the event '".concat(e,"'"))}}},F=A,V=(n("04d4"),n("169a")),I=n("132d"),M=Object(p["a"])(F,l,s,!1,null,null,null),N=M.exports;w()(M,{VDialog:V["a"],VIcon:I["a"]});var U={name:"App",components:{Calendar:N}},H=U,q=n("7496"),J=Object(p["a"])(H,a,i,!1,null,null,null),G=J.exports;w()(J,{VApp:q["a"]});var Y=n("025a"),z=n("f309");r["a"].use(z["a"]);var B=new z["a"]({});r["a"].use(Y["a"],{}),r["a"].config.productionTip=!1,new r["a"]({vuetify:B,render:function(e){return e(G)}}).$mount("#app")}});
//# sourceMappingURL=app.a9bfc558.js.map